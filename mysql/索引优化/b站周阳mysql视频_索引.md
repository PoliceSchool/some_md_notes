## 什么是索引？

MySQL官方对索引的定义为：索引（Index）是帮助MySQL高效获取数据的数据结构。
可以得到索引的本质：索引是数据结构

索引的目的在于提高查询效率，可以类比字典

**你可以理解为排好序的快速查找数据结构**

索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储在磁盘上



## 索引的优点与缺点

* 优点
  1. 提高数据检索的索引，降低数据库的IO成本
  2. 通过索引列对数据进行排序，降低数据的排序成本，降低CPU的消耗
* 劣势
  1. 实际上也是一张表，该表保存了主键和索引字段，并指向实体表的记录，所以索引列也是要占用空间的
  2. 因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为更新所带来的键值变化后的索引信息
  3. 索引只是提高效率的一个因素，如果你的MySQL有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询

## 索引的分类

* 单值索引：即一个索引只包含单个列，一个表可以有多个单列索引。
* 唯一索引：索引列的值必须唯一，但允许有空值
* 复合索引：即一个索引只包含多个列
* 基本语法：
  1. 创建
     CREATE [UNIQUE] INDEX indexName ON mytable(columnname(length));
     ALTER mytable ADD [UNIQUE] INDEX [indexName] ON (columnname(length));
  2. 删除
     DROP INDEX [indexName] ON mytable;
  3. 查看
     SHOW INDEX FROM table_name



## 索引结构

### BTree索引

* 检索原理



## 哪些情况下需要建索引

1. 主键自动建立唯一索引
2. 频繁作为查询条件的字段应该创建索引
3. 查询中与其他表关联的字段，外键关系建立索引
4. 频繁更新的字段不适合创建索引
5. Where条件里用不到的字段不创建索引
6. 单间/组合索引的选择问题，who?（在高并发下倾向创建组合索引）
7. 查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度
8.  查询中统计或者分组字段

## 哪些情况下不需要建索引

1. 表记录太少
2. 经常增删改的表
3. 数据重复且平均分布的表字段（比如性别不是男就是女，分布概率大概是50%;中国人的国籍都是中国）

